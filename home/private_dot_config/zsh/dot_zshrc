zstyle :omz:plugins:ssh-agent quiet yes
zstyle :omz:plugins:ssh-agent lazy yes
zstyle :omz:plugins:ssh-agent ssh-add-args --apple-load-keychain

# Add wisely, as too many plugins slow down shell startup.
plugins=(
	ssh-agent
	zsh-autocomplete
	git
	zsh-vi-mode
	zsh-autosuggestions
	zsh-syntax-highlighting
	command-not-found
	git-auto-fetch
	colored-man-pages
	copypath
	copyfile
	extract
	common-aliases
	brew # Make file template and do this only for osx
	zsh-you-should-use
	macos # osx only
	web-search
)

# https://docs.brew.sh/Shell-Completion#configuring-completions-in-zsh
FPATH="$(brew --prefix)/share/zsh/site-functions:${FPATH}"

# https://starship.rs/guide/#%F0%9F%9A%80-installation
eval "$(starship init zsh)"

# https://ohmyz.sh/#install
source $ZSH/oh-my-zsh.sh

# zsh-autocomplete preferences
# https://github.com/marlonrichert/zsh-autocomplete?tab=readme-ov-file#configuration
zstyle ':autocomplete:*' min-input 1 
zstyle ':completion:*' file-list yes

bindkey '^I' menu-select
bindkey -M emacs "^I" menu-select
bindkey -M viins "^I" menu-select
bindkey -M vicmd "^I" menu-select
bindkey -M menuselect '^I' menu-complete
bindkey -M menuselect '\r' .accept-line

# Autocomplete global aliases (alias -g) i.e my shortcuts
_complete_alias() {
    [[ -n $PREFIX ]] && compadd -- ${(M)${(k)galiases}:#$PREFIX*}
    return 1
}
zstyle ':completion:*' completer _complete_alias _complete _ignored
